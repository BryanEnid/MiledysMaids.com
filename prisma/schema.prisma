generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Address {
  id                Int               @id @default(autoincrement())
  street            String            @db.VarChar(255)
  city              String            @db.VarChar(255)
  state             String            @db.VarChar(255)
  zip               String            @db.VarChar(255)
  unit              String            @db.VarChar(255)
  Contact           Contact[]
}

model CleaningService {
  id                Int               @id @default(autoincrement())
  window_count      Int
  microwave_count   Int
  oven_count        Int
  refrigerator_count Int
  instructions      String            @db.VarChar(255)
  Slots             Slots[]
}

model Contact {
  id                Int               @id @default(autoincrement())
  full_name         String            @db.VarChar(255)
  phone             String            @db.VarChar(15)
  email             String            @db.VarChar(255)
  addressId         Int
  address           Address           @relation(fields: [addressId], references: [id], onDelete: Cascade)
  Slots             Slots[]
}

model Days {
  id                Int               @id @default(autoincrement())
  day               DateTime          @unique @db.Date
  booked_slots      Int               @default(0)
  Slots             Slots[]
}

model Slots {
  id                Int               @id @default(autoincrement())
  dateId            Int
  slot_number       Int
  contactId         Int
  cleaningServiceId Int
  day               Days              @relation(fields: [dateId], references: [id], onDelete: Cascade)
  contact           Contact           @relation(fields: [contactId], references: [id], onDelete: Cascade)
  cleaningService   CleaningService   @relation(fields: [cleaningServiceId], references: [id], onDelete: Cascade)
}
